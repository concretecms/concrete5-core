(()=>{var t,e={483:(t,e,n)=>{function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}!function(t,e){"use strict";function n(t){var n=this;t=t||{},t=e.extend({dataType:"json",type:"post",loader:"standard",error:function(t){n.error(t,n)},complete:function(){n.complete(n)},skipResponseValidation:!1},t),n.options=t,n.execute()}n.prototype={execute:function(){var t=this,n=t.options,s=n.success;n.success=function(e){t.success(e,t,s)},t.before(t),e.ajax(n)},before:function(t){t.options.loader&&e.fn.dialog.showLoader()},errorResponseToString:function(t){return n.renderErrorResponse(t,!0)},error:function(t,e){0!==t.readyState&&(ConcreteEvent.fire("AjaxRequestError",{response:t}),ConcreteAlert.dialog(ccmi18n.error,n.renderErrorResponse(t,!0)))},validateResponse:function(t,e){return t.error?(ConcreteEvent.fire("AjaxRequestError",{response:t}),ConcreteAlert.dialog(ccmi18n.error,n.renderJsonError(t),(function(){e&&e(!1,t)})),!1):(e&&e(!0,t),!0)},success:function(t,e,n){("json"!=e.options.dataType||e.options.skipResponseValidation||e.validateResponse(t))&&n&&n(t)},complete:function(t){t.options.loader&&e.fn.dialog.hideLoader()}},n.renderJsonError=function(t,n){if(!t)return"";var i=function(n,s){return"number"==typeof s&&e.isArray(t.htmlErrorIndexes)&&e.inArray(s,t.htmlErrorIndexes)>=0?n:e("<div />").text(n).html().replace(/\n/g,"<br />")},a="";if("object"===s(t.error)&&e.isArray(t.error.trace)){a='<p class="text-danger"><strong>'+i(t.error.message)+"</strong></p>",a+='<p class="text-muted">'+ccmi18n.errorDetails+"</p>",a+='<table class="table"><tbody>';for(var r,o=0;o<t.error.trace.length;o++)r=t.error.trace[o],a+="<tr><td>"+r.file+"("+r.line+"): "+r.class+"->"+r.function+"<td></tr>";a+="</tbody></table>"}else e.isArray(t.errors)&&t.errors.length>0&&"string"==typeof t.errors[0]?e.each(t.errors,(function(t,e){a+='<p class="text-danger"><strong>'+i(e,t)+"</strong></p>"})):"string"==typeof t.error&&""!==t.error&&(a='<p class="text-danger" style="word-break: break-all"><strong>'+i(t.error)+"</strong></p>");return a},n.renderErrorResponse=function(t,e){return n.renderJsonError(t.responseJSON,e)||t.responseText},n.validateResponse=n.prototype.validateResponse,n.errorResponseToString=n.prototype.errorResponseToString,e.concreteAjax=function(t){new n(t)},t.ConcreteAjaxRequest=n}(n.g,jQuery)},455:(t,e,n)=>{"use strict";n(483);function s(t,e,n,s,i,a,r,o){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),s&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=l):i&&(l=o?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}const i=s({components:{},methods:{setLanguage:function(){var t=this;$.fn.dialog.showLoader(),$.ajax({cache:!1,dataType:"json",method:"GET",url:t.loadStringsUrl+"/"+t.selectedLocale,success:function(e){t.$emit("set-locale",t.selectedLocale),t.$emit("set-language-strings",e.i18n),t.$emit("set-preconditions",e.preconditions),t.$emit("set-starting-points",e.starting_points),t.$emit("next")},complete:function(){$.fn.dialog.hideLoader()}})}},computed:{},props:{logo:{type:String,required:!0},loadStringsUrl:{type:String,required:!0},locale:{type:String,required:!1},onlineLocales:{type:Object,required:!0},locales:{type:Object,required:!0},lang:{type:Object,required:!0}},data:function(){return{selectedLocale:null,i18n:{}}},mounted:function(){this.selectedLocale=this.locale,this.selectedLocale||(this.selectedLocale="en_US"),this.i18n=this.lang}},(function(){var t=this,e=t._self._c;return e("form",[e("div",{staticClass:"text-center"},[e("img",{staticClass:"bg-primary rounded-circle",staticStyle:{"max-height":"144px"},attrs:{src:t.logo}})]),t._v(" "),e("div",[e("h1",{staticClass:"text-center mb-4 mt-4"},[t._v(t._s(t.lang.title))])]),t._v(" "),e("div",{staticClass:"form-group"},[e("h5",[t._v(t._s(t.i18n.chooseLanguage))]),t._v(" "),e("div",{staticClass:"input-group-lg input-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedLocale,expression:"selectedLocale"}],staticClass:"form-select form-select-lg",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedLocale=e.target.multiple?n:n[0]}}},[Object.entries(t.locales).length?e("optgroup",{attrs:{label:t.i18n.installedLanguages}},t._l(t.locales,(function(n,s){return e("option",{domProps:{value:s}},[t._v(t._s(n))])})),0):t._e(),t._v(" "),Object.entries(t.onlineLocales).length?e("optgroup",{attrs:{label:t.i18n.availableLanguages}},t._l(t.onlineLocales,(function(n,s){return e("option",{domProps:{value:s}},[t._v(t._s(n))])})),0):t._e()]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.setLanguage}},[e("i",{staticClass:"fas fa-arrow-right"})])])])])}),[],!1,null,null,null).exports;const a=s({components:{},props:{precondition:{type:Object,required:!0}},mounted:function(){this.createTooltips(),1!==this.precondition.result.state&&this.$emit("precondition-failed",this.precondition)},methods:{createTooltips:function(){this.$el.querySelectorAll(".launch-tooltip").forEach((function(t){new bootstrap.Tooltip(t)}))}},data:function(){return{}}},(function(){var t=this,e=t._self._c;return e("tr",[e("td",[1===t.precondition.result.state?e("i",{staticClass:"text-success fas fa-check"}):2===t.precondition.result.state?e("i",{staticClass:"text-warning fas fa-exclamation-triangle"}):4===t.precondition.result.state?e("i",{staticClass:"text-danger fas fa-exclamation-circle"}):t._e()]),t._v(" "),e("td",{staticClass:"w-100"},[e("span",{class:{"text-danger":4===t.precondition.result.state}},[t._v(t._s(t.precondition.precondition.name))])]),t._v(" "),e("td",[t.precondition.result.message?e("i",{staticClass:"fas fa-question-circle launch-tooltip",attrs:{title:t.precondition.result.message}}):t._e()])])}),[],!1,null,null,null).exports;const r=s({components:{},props:{precondition:{type:Object,required:!0}},mounted:function(){var t=this;$.ajax({cache:!1,dataType:"json",method:"GET",url:t.precondition.precondition.ajax_url}).done((function(e){400===e.response?t.requestUrlsSuccess=!0:t.requestUrlsSuccess=!1})).fail((function(e,n,s){t.requestUrlsSuccess=!1,t.ajaxFailed=!0}))},computed:{failureMessage:function(){return this.ajaxFailed?this.precondition.precondition.ajax_fail_message:this.requestUrlsSuccess?void 0:this.precondition.precondition.error_message}},watch:{requestUrlsSuccess:function(t){!1===t&&(this.createTooltips(),this.$emit("precondition-failed",this.precondition))}},methods:{createTooltips:function(){var t=this;this.$nextTick((function(){t.$el.querySelectorAll(".launch-tooltip").forEach((function(t){new bootstrap.Tooltip(t)}))}))}},data:function(){return{requestUrlsSuccess:null,ajaxFailed:!1}}},(function(){var t=this,e=t._self._c;return e("tr",[e("td",[null===t.requestUrlsSuccess?e("i",{staticClass:"fas fa-spinner fa-spin"}):t.requestUrlsSuccess?e("i",{staticClass:"text-success fas fa-check"}):e("i",{staticClass:"text-danger fas fa-exclamation-circle"})]),t._v(" "),e("td",{staticClass:"w-100"},[e("span",{class:{"text-danger":!1===t.requestUrlsSuccess||t.ajaxFailed}},[t._v(t._s(t.precondition.precondition.name))])]),t._v(" "),e("td",[!1===t.requestUrlsSuccess||t.ajaxFailed?e("i",{staticClass:"fas fa-question-circle launch-tooltip",attrs:{title:t.failureMessage}}):t._e()])])}),[],!1,null,null,null).exports;var o=s({components:{},props:{precondition:{type:Object,required:!0}},mounted:function(){this.testCookies()?this.cookiesEnabled=!0:(this.cookiesEnabled=!1,this.createTooltips(),this.$emit("precondition-failed",this.precondition))},methods:{createTooltips:function(){this.$el.querySelectorAll(".launch-tooltip").forEach((function(t){new bootstrap.Tooltip(t)}))},testCookies:function(){if("boolean"==typeof navigator.cookieEnabled)return navigator.cookieEnabled;var t="CONCRETECMS_INSTALL_TEST",e="ok_"+Math.random();return document.cookie=t+"="+e,!(document.cookie.indexOf(t+"="+e)<0)&&(document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT",!0)}},data:function(){return{cookiesEnabled:null}}},(function(){var t=this,e=t._self._c;return e("tr",[e("td",[t.cookiesEnabled?e("i",{staticClass:"text-success fas fa-check"}):e("i",{staticClass:"text-danger fas fa-exclamation-circle"})]),t._v(" "),e("td",{staticClass:"w-100"},[e("span",{class:{"text-danger":!t.cookiesEnabled}},[t._v(t._s(t.precondition.precondition.name))])]),t._v(" "),e("td",[t.cookiesEnabled?t._e():e("i",{staticClass:"fas fa-question-circle launch-tooltip",attrs:{title:t.precondition.message_failed}})])])}),[],!1,null,null,null);var l=s({components:{Precondition:a,RequestUrlsPrecondition:r,CookiesPrecondition:o.exports},methods:{preconditionFailed:function(t){this.$emit("precondition-failed",t)}},props:{preconditions:{type:Array,required:!0}},data:function(){return{}},mounted:function(){}},(function(){var t=this,e=t._self._c;return e("table",{staticClass:"table requirements-table"},[e("tbody",t._l(t.preconditions,(function(n){return e(n.precondition.component,{key:n.precondition.key,tag:"component",attrs:{precondition:n},on:{"precondition-failed":t.preconditionFailed}})})),1)])}),[],!1,null,null,null);const c=s({components:{PreconditionsList:l.exports},methods:{reloadPreconditions:function(){window.location.href=this.reloadPreconditionsUrl+"/"+this.locale},returnSortedPreconditions:function(t,e){var n=[],s=0;if(this.preconditions.forEach((function(t){(!e&&t.precondition.is_optional||e&&!t.precondition.is_optional)&&(n.push(t),s++)})),s>0){var i=[];return n.forEach((function(e,n){("left"===t&&n%2==0||"right"===t&&n%2==1)&&i.push(e)})),i}return[]},preconditionFailed:function(){this.showInstallErrors=!0}},computed:{requiredPreconditionsLeft:function(){return this.returnSortedPreconditions("left",!0)},requiredPreconditionsRight:function(){return this.returnSortedPreconditions("right",!0)},optionalPreconditionsLeft:function(){return this.returnSortedPreconditions("left")},optionalPreconditionsRight:function(){return this.returnSortedPreconditions("right")}},props:{logo:{type:String,required:!0},reloadPreconditionsUrl:{type:String,required:!0},locale:{type:String,required:!0},lang:{type:Object,required:!0},preconditions:{type:Array,required:!0}},data:function(){return{i18n:{},showInstallErrors:!1}},mounted:function(){this.i18n=this.lang}},(function(){var t=this,e=t._self._c;return e("form",[e("div",{staticClass:"text-center"},[e("img",{staticClass:"bg-primary rounded-circle",staticStyle:{"max-height":"48px"},attrs:{src:t.logo}})]),t._v(" "),e("div",[e("h3",{staticClass:"text-center mb-4 mt-3"},[t._v(t._s(t.i18n.stepRequirements))])]),t._v(" "),t.requiredPreconditionsLeft.length?e("div",{staticClass:"card mb-5"},[e("div",{staticClass:"card-header"},[t._v(t._s(t.i18n.requiredPreconditions))]),t._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("preconditions-list",{attrs:{preconditions:t.requiredPreconditionsLeft},on:{"precondition-failed":t.preconditionFailed}})],1),t._v(" "),e("div",{staticClass:"col-md-6"},[e("preconditions-list",{attrs:{preconditions:t.requiredPreconditionsRight},on:{"precondition-failed":t.preconditionFailed}})],1)])])]):t._e(),t._v(" "),t.optionalPreconditionsLeft.length?e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[t._v(t._s(t.i18n.optionalPreconditions))]),t._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("preconditions-list",{attrs:{preconditions:t.optionalPreconditionsLeft},on:{"precondition-failed":t.preconditionFailed}})],1),t._v(" "),e("div",{staticClass:"col-md-6"},[e("preconditions-list",{attrs:{preconditions:t.optionalPreconditionsRight},on:{"precondition-failed":t.preconditionFailed}})],1)])])]):t._e(),t._v(" "),t.showInstallErrors?e("div",{staticClass:"alert alert-danger mt-3"},[t._v("\n        "+t._s(t.i18n.installErrors)+"\n        "),e("span",{domProps:{innerHTML:t._s(t.i18n.installErrorsTrouble)}})]):t._e(),t._v(" "),t.showInstallErrors?e("div",{staticClass:"ccm-install-actions"},[e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.reloadPreconditions}},[t._v("\n            "+t._s(t.i18n.runTestsAgain)+"\n        ")])]):e("div",{staticClass:"ccm-install-actions"},[e("button",{staticClass:"me-auto btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.$emit("previous")}}},[t._v("\n            "+t._s(t.i18n.back)+"\n        ")]),t._v(" "),e("button",{staticClass:"ms-auto btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.$emit("next")}}},[t._v("\n            "+t._s(t.i18n.next)+"\n        ")])])])}),[],!1,null,null,null).exports;const d=s({components:{},methods:{next:function(){this.$refs.environmentForm.checkValidity()?(this.$emit("update-install-options",{site:this.site,adminUser:this.adminUser,database:this.database,session:this.session,localization:this.localization}),this.$emit("next")):this.$refs.environmentForm.reportValidity()}},computed:{},props:{logo:{type:String,required:!0},timezones:{type:Object,required:!0},timezone:{type:String,required:!1},siteLocaleLanguage:{type:String,required:!1},siteLocaleCountry:{type:String,required:!1},languages:{type:Object,required:!0},countries:{type:Object,required:!0},lang:{type:Object,required:!0}},data:function(){return{site:{name:"test",privacyPolicy:1,hasCanonicalUrl:0,canonicalUrl:"",hasAlternativeCanonicalUrl:0,alternativeCanonicalUrl:""},adminUser:{email:"andrew@concrete5.org",password:"password",confirmPassword:"password"},database:{server:"localhost",username:"root",password:"",database:"concrete"},session:{handler:""},localization:{siteLocaleLanguage:"",siteLocaleCountry:"",timezone:""}}},mounted:function(){this.localization.siteLocaleLanguage=this.siteLocaleLanguage,this.localization.siteLocaleCountry=this.siteLocaleCountry,this.localization.timezone=this.timezone,this.localization.timezone="America/Los_Angeles"}},(function(){var t=this,e=t._self._c;return e("form",{ref:"environmentForm",staticClass:"w-100"},[e("div",{staticClass:"text-center"},[e("img",{staticClass:"bg-primary rounded-circle",staticStyle:{"max-height":"48px"},attrs:{src:t.logo}})]),t._v(" "),e("div",[e("h3",{staticClass:"text-center mb-4 mt-3"},[t._v(t._s(t.lang.stepEnvironment))])]),t._v(" "),e("div",{staticClass:"card card-default mb-5"},[e("div",{staticClass:"card-header"},[t._v(t._s(t.lang.site))]),t._v(" "),e("div",{attrs:{id:"site"}},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label"},[t._v(t._s(t.lang.siteName))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.site.name,expression:"site.name"}],staticClass:"form-control form-control-lg",attrs:{type:"text",autofocus:"autofocus",required:"required"},domProps:{value:t.site.name},on:{input:function(e){e.target.composing||t.$set(t.site,"name",e.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label"},[t._v(t._s(t.lang.email))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.adminUser.email,expression:"adminUser.email"}],staticClass:"form-control form-control-lg",attrs:{type:"email",required:"required"},domProps:{value:t.adminUser.email},on:{input:function(e){e.target.composing||t.$set(t.adminUser,"email",e.target.value)}}})])])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label"},[t._v(t._s(t.lang.password))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.adminUser.password,expression:"adminUser.password"}],staticClass:"form-control form-control-lg",attrs:{type:"password",required:"required"},domProps:{value:t.adminUser.password},on:{input:function(e){e.target.composing||t.$set(t.adminUser,"password",e.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label"},[t._v(t._s(t.lang.confirmPassword))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.adminUser.confirmPassword,expression:"adminUser.confirmPassword"}],staticClass:"form-control form-control-lg",attrs:{type:"password",required:"required"},domProps:{value:t.adminUser.confirmPassword},on:{input:function(e){e.target.composing||t.$set(t.adminUser,"confirmPassword",e.target.value)}}})])])])])])]),t._v(" "),e("div",{staticClass:"card card-default mb-5"},[e("div",{staticClass:"card-header"},[t._v(t._s(t.lang.database))]),t._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label"},[t._v(t._s(t.lang.dbServer))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.database.server,expression:"database.server"}],staticClass:"form-control form-control-lg",attrs:{type:"text",required:"required"},domProps:{value:t.database.server},on:{input:function(e){e.target.composing||t.$set(t.database,"server",e.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label"},[t._v(t._s(t.lang.dbUsername))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.database.username,expression:"database.username"}],staticClass:"form-control form-control-lg",attrs:{type:"text"},domProps:{value:t.database.username},on:{input:function(e){e.target.composing||t.$set(t.database,"username",e.target.value)}}})])])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label"},[t._v(t._s(t.lang.dbPassword))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.database.password,expression:"database.password"}],staticClass:"form-control form-control-lg",attrs:{type:"password"},domProps:{value:t.database.password},on:{input:function(e){e.target.composing||t.$set(t.database,"password",e.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label"},[t._v(t._s(t.lang.dbDatabase))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.database.database,expression:"database.database"}],staticClass:"form-control form-control-lg",attrs:{type:"text",required:"required"},domProps:{value:t.database.database},on:{input:function(e){e.target.composing||t.$set(t.database,"database",e.target.value)}}})])])])])]),t._v(" "),e("div",{staticClass:"card card-default mb-5"},[e("div",{staticClass:"card-header"},[t._v("\n            "+t._s(t.lang.privacyPolicy)+"\n        ")]),t._v(" "),e("div",{staticClass:"card-body"},[e("p",{staticClass:"text-muted"},[t._v(t._s(t.lang.privacyPolicyExplanation))]),t._v(" "),e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.site.privacyPolicy,expression:"site.privacyPolicy"}],staticClass:"form-check-input",attrs:{type:"checkbox",required:"",id:"privacyPolicy"},domProps:{checked:Array.isArray(t.site.privacyPolicy)?t._i(t.site.privacyPolicy,null)>-1:t.site.privacyPolicy},on:{change:function(e){var n=t.site.privacyPolicy,s=e.target,i=!!s.checked;if(Array.isArray(n)){var a=t._i(n,null);s.checked?a<0&&t.$set(t.site,"privacyPolicy",n.concat([null])):a>-1&&t.$set(t.site,"privacyPolicy",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.site,"privacyPolicy",i)}}}),t._v(" "),e("label",{staticClass:"form-check-label",attrs:{for:"privacyPolicy"}},[e("span",{domProps:{innerHTML:t._s(t.lang.privacyPolicyLabel)}})])])])]),t._v(" "),e("div",{staticClass:"card card-default"},[e("div",{staticClass:"card-header"},[t._v(t._s(t.lang.advancedOptions))]),t._v(" "),e("div",{staticClass:"card-body container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"mb-3"},[e("div",{staticClass:"form-label"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.site.hasCanonicalUrl,expression:"site.hasCanonicalUrl"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"canonicalUrlChecked"},domProps:{checked:Array.isArray(t.site.hasCanonicalUrl)?t._i(t.site.hasCanonicalUrl,null)>-1:t.site.hasCanonicalUrl},on:{change:function(e){var n=t.site.hasCanonicalUrl,s=e.target,i=!!s.checked;if(Array.isArray(n)){var a=t._i(n,null);s.checked?a<0&&t.$set(t.site,"hasCanonicalUrl",n.concat([null])):a>-1&&t.$set(t.site,"hasCanonicalUrl",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.site,"hasCanonicalUrl",i)}}}),t._v(" "),e("label",{staticClass:"form-check-label",attrs:{for:"canonicalUrlChecked"}},[t._v("\n                                "+t._s(t.lang.mainCanonicalUrl)+"\n                            ")])]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.site.canonicalUrl,expression:"site.canonicalUrl"}],staticClass:"form-control form-control-lg",attrs:{type:"url",pattern:"https?:.+",placeholder:t.lang.urlPlaceholder,disabled:!t.site.hasCanonicalUrl},domProps:{value:t.site.canonicalUrl},on:{input:function(e){e.target.composing||t.$set(t.site,"canonicalUrl",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"mb-3"},[e("div",{staticClass:"form-label"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.site.hasAlternativeCanonicalUrl,expression:"site.hasAlternativeCanonicalUrl"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"alternativeCanonicalUrlChecked"},domProps:{checked:Array.isArray(t.site.hasAlternativeCanonicalUrl)?t._i(t.site.hasAlternativeCanonicalUrl,null)>-1:t.site.hasAlternativeCanonicalUrl},on:{change:function(e){var n=t.site.hasAlternativeCanonicalUrl,s=e.target,i=!!s.checked;if(Array.isArray(n)){var a=t._i(n,null);s.checked?a<0&&t.$set(t.site,"hasAlternativeCanonicalUrl",n.concat([null])):a>-1&&t.$set(t.site,"hasAlternativeCanonicalUrl",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.site,"hasAlternativeCanonicalUrl",i)}}}),t._v(" "),e("label",{staticClass:"form-check-label",attrs:{for:"alternativeCanonicalUrlChecked"}},[t._v("\n                                "+t._s(t.lang.alternativeCanonicalUrl)+"\n                            ")])]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.site.alternativeCanonicalUrl,expression:"site.alternativeCanonicalUrl"}],staticClass:"form-control form-control-lg",attrs:{type:"url",pattern:"https?:.+",placeholder:t.lang.urlPlaceholder,disabled:!t.site.hasAlternativeCanonicalUrl},domProps:{value:t.site.alternativeCanonicalUrl},on:{input:function(e){e.target.composing||t.$set(t.site,"alternativeCanonicalUrl",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label"},[t._v(t._s(t.lang.sessionHandler))]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.session.handler,expression:"session.handler"}],staticClass:"form-control form-control-lg",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.session,"handler",e.target.multiple?n:n[0])}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.lang.sessionHandlerDefault))]),t._v(" "),e("option",{attrs:{value:"database"}},[t._v(t._s(t.lang.sessionHandlerDatabase))])])])]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label"},[t._v(t._s(t.lang.language))]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.localization.siteLocaleLanguage,expression:"localization.siteLocaleLanguage"}],staticClass:"form-select form-select-lg",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.localization,"siteLocaleLanguage",e.target.multiple?n:n[0])}}},t._l(t.languages,(function(n,s){return e("option",{domProps:{value:s}},[t._v(t._s(n))])})),0)]),t._v(" "),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label"},[t._v(t._s(t.lang.country))]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.localization.siteLocaleCountry,expression:"localization.siteLocaleCountry"}],staticClass:"form-select form-select-lg",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.localization,"siteLocaleCountry",e.target.multiple?n:n[0])}}},t._l(t.countries,(function(n,s){return e("option",{domProps:{value:s}},[t._v(t._s(n))])})),0)]),t._v(" "),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label"},[t._v(t._s(t.lang.timezone))]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.localization.timezone,expression:"localization.timezone"}],staticClass:"form-select form-select-lg",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.localization,"timezone",e.target.multiple?n:n[0])}}},t._l(t.timezones,(function(n,s){return e("option",{domProps:{value:s}},[t._v(t._s(n))])})),0)])])])])]),t._v(" "),e("div",{staticClass:"ccm-install-actions"},[e("button",{staticClass:"me-auto btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.$emit("previous")}}},[t._v("\n            "+t._s(t.lang.back)+"\n        ")]),t._v(" "),e("button",{staticClass:"ms-auto btn btn-primary",attrs:{type:"button"},on:{click:t.next}},[t._v("\n            "+t._s(t.lang.next)+"\n        ")])])])}),[],!1,null,null,null).exports;const u=s({components:{},methods:{selectStartingPoint:function(){this.$emit("select-starting-point",this.selectedStartingPoint)}},computed:{},props:{logo:{type:String,required:!0},defaultStartingPoint:{type:String,required:!1},startingPoints:{type:Array,required:!0},lang:{type:Object,required:!0}},data:function(){return{selectedStartingPoint:""}},mounted:function(){this.selectedStartingPoint=this.defaultStartingPoint}},(function(){var t=this,e=t._self._c;return e("form",[e("div",{staticClass:"text-center"},[e("img",{staticClass:"bg-primary rounded-circle",staticStyle:{"max-height":"48px"},attrs:{src:t.logo}})]),t._v(" "),e("div",[e("h3",{staticClass:"text-center mb-4 mt-3"},[t._v(t._s(t.lang.stepContent))])]),t._v(" "),e("div",{staticClass:"card card-default"},[e("div",{staticClass:"card-header"},[t._v(t._s(t.lang.startingPoint))]),t._v(" "),e("div",{staticClass:"container",attrs:{id:"starting-point"}},[e("div",{staticClass:"card-body"},t._l(t.startingPoints,(function(n,s){return e("div",{class:{"form-check":!0,"mb-3":s+1<t.startingPoints.length}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedStartingPoint,expression:"selectedStartingPoint"}],staticClass:"form-check-input",attrs:{type:"radio",id:"sp"+n.handle},domProps:{value:n.handle,checked:t._q(t.selectedStartingPoint,n.handle)},on:{change:function(e){t.selectedStartingPoint=n.handle}}}),t._v(" "),e("div",{staticClass:"form-check-label"},[e("label",{attrs:{for:"sp"+n.handle}},[e("b",[t._v(t._s(n.name))])]),t._v(" "),e("div",{staticClass:"text-muted"},[t._v(t._s(n.description))])])])})),0)])]),t._v(" "),e("div",{staticClass:"ccm-install-actions"},[e("button",{staticClass:"me-auto btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.$emit("previous")}}},[t._v("\n            "+t._s(t.lang.back)+"\n        ")]),t._v(" "),e("button",{staticClass:"ms-auto btn btn-primary",attrs:{type:"button"},on:{click:t.selectStartingPoint}},[t._v("\n            "+t._s(t.lang.next)+"\n        ")])])])}),[],!1,null,null,null).exports;const p=s({components:{},methods:{initProgressBar:function(){NProgress.configure({showSpinner:!1})}},computed:{},props:{logo:{type:String,required:!0},startingPointRoutineUrl:{type:String,required:!0},beginInstallationUrl:{type:String,required:!0},installOptions:{type:Object,required:!0},lang:{type:Object,required:!0}},data:function(){return{routines:null,currentProgress:null,currentRoutine:null,installError:null}},watch:{currentRoutine:function(t){var e=this;if(this.routines.length>t){var n=this.installOptions.startingPoint,s=this.routines[t],i=s.method,a=this.startingPointRoutineUrl+"/"+n+"/"+i;e.currentProgress=s.text,$.ajax({cache:!1,dataType:"json",method:"post",data:this.installOptions,url:a,success:function(t){t.error?e.installError=t.message:(NProgress.set(s.progress/100),e.currentRoutine++)}})}else NProgress.done(),e.currentProgress=e.lang.installationComplete,e.$emit("installation-complete")}},mounted:function(){this.initProgressBar();var t=this;t.currentProgress=this.lang.loadingInstallationRoutines,$.ajax({cache:!1,dataType:"json",method:"post",data:this.installOptions,url:t.beginInstallationUrl,success:function(e){t.routines=e,t.currentRoutine=0}})}},(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"text-center position-relative"},[t._m(0),t._v(" "),e("img",{staticClass:"bg-primary rounded-circle",staticStyle:{"max-height":"48px"},attrs:{src:t.logo}})]),t._v(" "),e("div",[e("h3",{staticClass:"text-center mb-4 mt-3"},[t._v(t._s(t.lang.stepPerformInstallation))])]),t._v(" "),e("div",{attrs:{id:"interstitial-message"}},[t.installError||t.currentProgress?e("div",{staticClass:"mb-3"},[t.installError?e("div",{staticClass:"alert alert-danger"},[e("span",{domProps:{innerHTML:t._s(t.installError)}})]):e("div",[e("div",{staticClass:"lead text-center"},[t._v("\n                    "+t._s(t.currentProgress)+"\n                ")])])]):t._e(),t._v(" "),e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[t._v(t._s(t.lang.interstitial.whileYouWait))]),t._v(" "),e("div",{staticClass:"card-body"},[e("h4",{},[t._v(t._s(t.lang.interstitial.forums))]),t._v(" "),e("p",[e("span",{domProps:{innerHTML:t._s(t.lang.interstitial.forumsMessage)}})]),t._v(" "),e("h4",{},[t._v(t._s(t.lang.interstitial.userDocumentation))]),t._v(" "),e("p",[e("span",{domProps:{innerHTML:t._s(t.lang.interstitial.userDocumentationMessage)}})]),t._v(" "),e("h4",{},[t._v(t._s(t.lang.interstitial.screencasts))]),t._v(" "),e("p",[e("span",{domProps:{innerHTML:t._s(t.lang.interstitial.screencastsMessage)}})]),t._v(" "),e("h4",{},[t._v(t._s(t.lang.interstitial.developerDocumentation))]),t._v(" "),e("p",[e("span",{domProps:{innerHTML:t._s(t.lang.interstitial.developerDocumentationMessage)}})])])])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"position-absolute w-100",staticStyle:{top:"-8px"}},[t("div",{staticClass:"spinner-border text-primary",staticStyle:{width:"64px",height:"64px"},attrs:{role:"status"}})])}],!1,null,null,null).exports;var m=s({components:{},methods:{},computed:{},props:{installationCompleteUrl:{type:String,required:!0},logo:{type:String,required:!0},lang:{type:Object,required:!0}},data:function(){return{}},mounted:function(){}},(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"text-center"},[e("img",{staticClass:"bg-primary rounded-circle",staticStyle:{"max-height":"48px"},attrs:{src:t.logo}})]),t._v(" "),e("div",[e("h3",{staticClass:"text-center mb-4 mt-3"},[t._v(t._s(t.lang.stepInstallationComplete))])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 offset-md-3 text-center"},[e("div",{staticClass:"mb-4 text-start"},[e("span",{domProps:{innerHTML:t._s(t.lang.installationCompleteMessage)}})]),t._v(" "),e("a",{staticClass:"btn btn-lg btn-primary",attrs:{href:t.installationCompleteUrl}},[t._v(t._s(t.lang.editYourSite))])])])])}),[],!1,null,null,null);const v=s({components:{ChooseLanguage:i,Preconditions:c,Environment:d,StartingPoint:u,PerformInstallation:p,InstallationComplete:m.exports},watch:{environmentErrors:function(){window.scrollTo(0,0)},environmentWarnings:function(t){t.length&&window.scrollTo(0,0)}},methods:{selectStartingPoint:function(t){this.startingPoint=t,this.next()},translateOptionPreconditionsToErrorsAndWarnings:function(){var t=this;this.environmentWarnings=[],this.optionsPreconditions.forEach((function(e){4===e.result.state?e.precondition.is_optional?t.ignoreWarnings||t.environmentWarnings.push(e.result.message):t.environmentErrors.push(e.result.message):2===e.result.state&&(t.ignoreWarnings||t.environmentWarnings.push(e.result.message))}))},updateInstallOptions:function(t){this.installOptions=t,this.installOptions.locale=this.selectedLocale,this.installOptions.startingPoint=this.startingPoint},validateInstallOptions:function(t){var e=this;$.fn.dialog.showLoader(),$.ajax({cache:!1,dataType:"json",method:"post",data:this.installOptions,url:e.validateEnvironmentUrl,success:function(n){$.fn.dialog.hideLoader(),n.error&&n.error.error?e.environmentErrors=n.error.errors:e.environmentErrors=[],e.optionsPreconditions=n.preconditions,e.translateOptionPreconditionsToErrorsAndWarnings(),t&&(e.environmentErrors.length||e.environmentWarnings.length&&!e.ignoreWarnings||e.next())},complete:function(){$.fn.dialog.hideLoader()}})},setLocale:function(t){this.selectedLocale=t},setLanguageStrings:function(t){this.i18n=t},setPreconditions:function(t){this.loadedPreconditions=t},setStartingPoints:function(t){this.loadedStartingPoints=t},previous:function(){"environment"===this.step?this.step="starting_point":"starting_point"===this.step?this.step="requirements":"requirements"===this.step&&(this.step="language"),this.environmentWarnings=[],this.environmentErrors=[]},next:function(){"language"===this.step?this.step="requirements":"requirements"===this.step?this.step="starting_point":"starting_point"===this.step?this.step="environment":"environment"===this.step&&(this.step="perform_installation"),this.environmentWarnings=[],this.environmentErrors=[]},returnSortedPreconditions:function(t,e){var n=[],s=0;if(this.loadedPreconditions.forEach((function(t){(!e&&t.is_optional||e&&!t.is_optional)&&(n.push(t),s++)})),s>0){var i=[];return n.forEach((function(e,n){("left"===t&&n%2==0||"right"===t&&n%2==1)&&i.push(e)})),i}return[]}},computed:{stepTitle:function(){return"installation_complete"===this.step?this.i18n.stepInstallationComplete:"perform_installation"===this.step?this.i18n.stepPerformInstallation:"starting_point"===this.step?this.i18n.stepStartingPoint:"language"===this.step?this.i18n.stepLanguage:"requirements"===this.step?this.i18n.stepRequirements:"environment"===this.step?this.i18n.stepEnvironment:void 0}},props:{installationCompleteUrl:{type:String,required:!0},logo:{type:String,required:!0},defaultStartingPoint:{type:String,required:!1},timezones:{type:Object,required:!0},timezone:{type:String,required:!1},validateEnvironmentUrl:{type:String,required:!0},loadStringsUrl:{type:String,required:!0},beginInstallationUrl:{type:String,required:!0},startingPointRoutineUrl:{type:String,required:!0},reloadPreconditionsUrl:{type:String,required:!0},locale:{type:String,required:!1},concreteVersion:{type:String,required:!0},startingPoints:{type:Array,required:!1},preconditions:{type:Array,required:!1},locales:{type:Object,required:!0},countries:{type:Object,required:!0},siteLocaleLanguage:{type:String,required:!1},siteLocaleCountry:{type:String,required:!1},languages:{type:Object,required:!0},lang:{type:Object,required:!0},onlineLocales:{type:Object,required:!0}},data:function(){return{step:null,selectedLocale:null,i18n:{},loadedPreconditions:[],loadedStartingPoints:[],environmentWarnings:[],environmentErrors:[],optionsPreconditions:[],ignoreWarnings:!1,startingPoint:null,installOptions:{}}},mounted:function(){this.selectedLocale=this.locale,this.i18n=this.lang,this.preconditions&&(this.loadedPreconditions=this.preconditions),this.startingPoints&&(this.loadedStartingPoints=this.startingPoints),this.locale?this.step="requirements":this.step="language"}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ccm-ui"},[e("div",{staticClass:"ccm-install-version"},[e("small",[t._v(t._s(t.concreteVersion))])]),t._v(" "),t.environmentErrors.length>0?e("div",{staticClass:"alert alert-danger mb-5"},[e("span",{domProps:{innerHTML:t._s(t.environmentErrors.join("<br>"))}})]):t._e(),t._v(" "),t.environmentWarnings.length>0?e("div",{staticClass:"alert alert-warning mb-5"},[e("span",{domProps:{innerHTML:t._s(t.environmentWarnings.join("<br>"))}}),t._v(" "),e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.ignoreWarnings,expression:"ignoreWarnings"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"ignoreWarnings"},domProps:{checked:Array.isArray(t.ignoreWarnings)?t._i(t.ignoreWarnings,null)>-1:t.ignoreWarnings},on:{change:function(e){var n=t.ignoreWarnings,s=e.target,i=!!s.checked;if(Array.isArray(n)){var a=t._i(n,null);s.checked?a<0&&(t.ignoreWarnings=n.concat([null])):a>-1&&(t.ignoreWarnings=n.slice(0,a).concat(n.slice(a+1)))}else t.ignoreWarnings=i}}}),t._v(" "),e("label",{staticClass:"form-check-label",attrs:{for:"ignoreWarnings"}},[t._v(t._s(t.i18n.ignoreWarnings))])])]):t._e(),t._v(" "),e("transition",{attrs:{name:"install-step",mode:"out-in"}},["language"===t.step?e("choose-language",{attrs:{logo:t.logo,"load-strings-url":t.loadStringsUrl,locales:t.locales,locale:t.locale,"online-locales":t.onlineLocales,lang:t.lang},on:{"set-locale":t.setLocale,"set-language-strings":t.setLanguageStrings,"set-preconditions":t.setPreconditions,"set-starting-points":t.setStartingPoints,next:t.next}}):"requirements"===t.step?e("preconditions",{attrs:{locale:t.selectedLocale,logo:t.logo,lang:t.lang,preconditions:t.loadedPreconditions,"reload-preconditions-url":t.reloadPreconditionsUrl},on:{previous:t.previous,next:t.next}}):"starting_point"===t.step?e("starting-point",{attrs:{locale:t.selectedLocale,lang:t.lang,logo:t.logo,"starting-points":t.loadedStartingPoints,"default-starting-point":t.defaultStartingPoint},on:{"select-starting-point":t.selectStartingPoint,previous:t.previous}}):"environment"===t.step?e("environment",{attrs:{lang:t.lang,logo:t.logo,languages:t.languages,"site-locale-language":t.siteLocaleLanguage,"site-locale-country":t.siteLocaleCountry,countries:t.countries,timezone:t.timezone,timezones:t.timezones},on:{previous:t.previous,"update-install-options":t.updateInstallOptions,next:function(e){return t.validateInstallOptions(!0)}}}):"perform_installation"===t.step?e("perform-installation",{attrs:{"begin-installation-url":t.beginInstallationUrl,lang:t.lang,logo:t.logo,"install-options":t.installOptions,"starting-point-routine-url":t.startingPointRoutineUrl},on:{"installation-complete":function(e){t.step="installation_complete"}}}):"installation_complete"===t.step?e("installation-complete",{attrs:{logo:t.logo,"installation-complete-url":t.installationCompleteUrl,lang:t.lang}}):t._e()],1)],1)}),[],!1,null,null,null).exports;$((function(){new Vue({el:"#ccm-page-install",components:{ConcreteInstaller:v}})}))},159:()=>{},749:()=>{}},n={};function s(t){var i=n[t];if(void 0!==i)return i.exports;var a=n[t]={exports:{}};return e[t](a,a.exports,s),a.exports}s.m=e,t=[],s.O=(e,n,i,a)=>{if(!n){var r=1/0;for(d=0;d<t.length;d++){for(var[n,i,a]=t[d],o=!0,l=0;l<n.length;l++)(!1&a||r>=a)&&Object.keys(s.O).every((t=>s.O[t](n[l])))?n.splice(l--,1):(o=!1,a<r&&(r=a));if(o){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[n,i,a]},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={496:0,31:0,261:0};s.O.j=e=>0===t[e];var e=(e,n)=>{var i,a,[r,o,l]=n,c=0;if(r.some((e=>0!==t[e]))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(l)var d=l(s)}for(e&&e(n);c<r.length;c++)a=r[c],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(d)},n=self.webpackChunkconcreteCMS=self.webpackChunkconcreteCMS||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),s.O(void 0,[31,261],(()=>s(455))),s.O(void 0,[31,261],(()=>s(159)));var i=s.O(void 0,[31,261],(()=>s(749)));i=s.O(i)})();